<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  
  <!-- Mermaid support -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      mermaid.initialize({ 
        startOnLoad: false,
        theme: 'dark',
        themeVariables: {
          darkMode: true,
          background: '#161b22',
          primaryColor: '#58a6ff',
          primaryTextColor: '#c9d1d9',
          primaryBorderColor: '#30363d',
          lineColor: '#8b949e',
          secondaryColor: '#1f6feb',
          tertiaryColor: '#161b22',
          mainBkg: '#0d1117',
          secondBkg: '#161b22',
          tertiaryTextColor: '#c9d1d9',
          nodeTextColor: '#c9d1d9',
          textColor: '#c9d1d9',
          titleColor: '#c9d1d9',
          labelTextColor: '#c9d1d9',
          actorTextColor: '#c9d1d9',
          sectionTextColor: '#c9d1d9',
          fillType0: '#1f6feb',
          fillType1: '#0969da',
          fillType2: '#0860ca',
          fillType3: '#0550ae',
          fillType4: '#033d8b',
          fillType5: '#0a3069',
          fillType6: '#04264d',
          fillType7: '#031d30'
        }
      });
      
      // Convert code blocks with language-mermaid to mermaid divs
      document.querySelectorAll('pre code.language-mermaid').forEach(function(el) {
        // Get the mermaid code
        var code = el.textContent;
        
        // Remove any config blocks
        code = code.replace(/^---[\s\S]*?---\n/, '');
        
        // Create a div for mermaid
        var mermaidDiv = document.createElement('div');
        mermaidDiv.className = 'mermaid';
        mermaidDiv.textContent = code;
        
        // Replace the pre element with the mermaid div
        var pre = el.parentElement;
        pre.parentElement.replaceChild(mermaidDiv, pre);
      });
      
      // Render all mermaid diagrams
      mermaid.init();
    });
  </script>
</head>
<body>
  <div class="sidebar">
    <div class="sidebar-header">
      {% if site.logo %}
      <img src="{{ site.logo | relative_url }}" alt="{{ site.title }}" style="max-height: 40px; margin-bottom: 10px;">
      {% endif %}
      <h3 style="color: var(--color-fg-default); margin: 0;">{{ site.title }}</h3>
    </div>
    <nav>
      <ul>
        <li><a href="{{ '/' | relative_url }}">Home</a></li>
        
        <li>
          <strong>Getting Started</strong>
          <ul>
            <li><a href="{{ '/getting_started/quick-start' | relative_url }}">Quick Start</a></li>
            <li><a href="{{ '/getting_started/basic-concepts' | relative_url }}">Basic Concepts</a></li>
            <li><a href="{{ '/getting_started/first-extension' | relative_url }}">First Extension</a></li>
          </ul>
        </li>
        
        <li>
          <strong>Architecture</strong>
          <ul>
            <li><a href="{{ '/architecture/core-architecture' | relative_url }}">Core Architecture</a></li>
            <li><a href="{{ '/architecture/initialization' | relative_url }}">Initialization</a></li>
            <li><a href="{{ '/architecture/memory-model' | relative_url }}">Memory Model</a></li>
          </ul>
        </li>
        
        <li>
          <strong>Type System</strong>
          <ul>
            <li><a href="{{ '/type_system/variant-internals' | relative_url }}">Variant Internals</a></li>
            <li><a href="{{ '/type_system/classdb-internals' | relative_url }}">ClassDB Internals</a></li>
            <li><a href="{{ '/type_system/template-specializations' | relative_url }}">Template Specializations</a></li>
          </ul>
        </li>
        
        <li>
          <strong>Engine Integration</strong>
          <ul>
            <li><a href="{{ '/engine_integration/binding-system' | relative_url }}">Binding System</a></li>
            <li><a href="{{ '/engine_integration/class-registration-inheritance' | relative_url }}">Class Registration</a></li>
            <li><a href="{{ '/engine_integration/object-resource-node' | relative_url }}">Object, Resource & Node</a></li>
            <li><a href="{{ '/engine_integration/notification-system' | relative_url }}">Notification System</a></li>
            <li><a href="{{ '/engine_integration/game-loop-lifecycle' | relative_url }}">Game Loop</a></li>
            <li><a href="{{ '/engine_integration/gdscript-interaction' | relative_url }}">GDScript Interaction</a></li>
            <li><a href="{{ '/engine_integration/singleton-interactions' | relative_url }}">Singletons</a></li>
          </ul>
        </li>
        
        <li>
          <strong>Advanced Topics</strong>
          <ul>
            <li><a href="{{ '/advanced_topics/complex-patterns' | relative_url }}">Complex Patterns</a></li>
            <li><a href="{{ '/advanced_topics/performance-optimization' | relative_url }}">Performance</a></li>
            <li><a href="{{ '/advanced_topics/thread-safety' | relative_url }}">Thread Safety</a></li>
            <li><a href="{{ '/advanced_topics/error-debugging' | relative_url }}">Error Handling</a></li>
          </ul>
        </li>
      </ul>
    </nav>
  </div>
  
  <div class="main-content">
    <div class="container-lg">
      {{ content }}
    </div>
  </div>
</body>
</html>